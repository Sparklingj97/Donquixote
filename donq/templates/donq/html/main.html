<!doctype html> {% load staticfiles%}
<html>

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale=1.0, minimum-scale = 1.0, user-scalable=no, target-densitydpi = medium-dpi" />
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="{% static "img/favicon.png" %}">
        <link rel="stylesheet" type="text/css" href="{% static "css/main.css" %}"></link>
    <link rel="stylesheet" type="text/css" href="{% static "css/animate.css" %}"></link>
<script src="{% static "js/jquery-2.1.4.min.js" %}"></script>
<script type="text/javascript" src="{% static "js/skrollr.min.js" %}"></script>
<script type="text/javascript">
    skrollr.init({
        smoothScrolling: false,
        mobileDeceleration: 0.004
    });
</script>
<script src="http://listjs.com/no-cdn/list.js"></script>
<script src="http://listjs.com/no-cdn/list.fuzzysearch.js"></script>
<script src="{% static "js/jquery.cookie.js" %}"></script>
<script src="{% static "js/jquery.preimage.js" %}"></script>

<script src="http://malsup.github.com/jquery.form.js"></script>
    <script src="{% static "js/index.js" %}"></script>

<script type="text/javascript">
    window.addEventListener('load', function () {
        setTimeout(scrollTo, 0, 0, 1);
    }, false);
</script>
<script>
    $(document).ready(function () {
        $("#sidebar_right").hover(function () {
            $("#f_nav_category").css("backgroundColor", "rgba(0,0,0,0.3)");
            $("#f_nav_category").css("color", "white");
        }, function () {
            $(this).css("left", "0px");
            $("#f_nav_category").css("backgroundColor", "transparent");
            $("#f_nav_category").css("color", "#aeaeae");
        });
    });

    $(document).ready(function () {
        $("#f_nav_category").hover(function () {
            $("#f_nav_category").css("backgroundColor", "rgba(255,255,255,0.1)");
            $("#f_nav_category").css("color", "white");
        }, function () {
            $("#f_nav_category").css("backgroundColor", "transparent");
            $("#f_nav_category").css("color", "#aeaeae");
        });
    });

    $(document).ready(function () {
        $("#sidebar_right_chang").hover(function () {
            $("#changsort").css("backgroundColor", "rgba(0,0,0,0.3)");
            $("#changsort").css("color", "white");
        }, function () {
            $(this).css("left", "0px");
            $("#changsort").css("backgroundColor", "transparent");
            $("#changsort").css("color", "#aeaeae");
        });
    });

    $(document).ready(function () {
        $("#sidebar_right_chang").hover(function () {
            $("#changsort").css("backgroundColor", "rgba(0,0,0,0.3)");
            $("#changsort").css("color", "white");
        }, function () {
            $("#changsort").css("backgroundColor", "transparent");
            $("#changsort").css("color", "#aeaeae");
        });
    });
</script>
<title> DONQUIXOTE </title>
</head>

<body id="test-list">

    <!-- 상단바 시작 -->
    <div id="topnav">
        <!-- 검색창 시작 -->
        <div id="search_sidebar">
            <input id="textfield" placeholder="검색" class="fuzzy-search" type="search" autocomplete="on"></input>
        <label id=search_img for="search_submit"></label>
        <input id="search_submit" type="submit"></input>
    </div>
<!-- 검색창 끝 -->

<div id="topbar_iconbox">
    <!-- 글쓰기 아이콘 -->
    <a onclick="clikedWriteButton(this)">
        <img class="topbar_icon pencil" src="{% static "img/pencil.png" %}">
        <img class="topbar_icon pencil focused_pencil" src="{% static "img/pencil-focused.png" %}">
    </a>
    <!-- 알림 아이콘 -->
    <a>
        <div id="btn_noti" onclick="showNoti()">
            <img class="topbar_icon noti focused_noti" src="{% static "img/notification-focused.png" %}">
            <img class="topbar_icon noti" src="{% static "img/notification.png" %}">
        </div>
    </a>
</div>

<!-- 알림 시작 -->

<div id="noti_container">
    <div class="noti_borderLine"></div>
    <div id="noti_content_container">
        <div class="noti_box">
            <div class="noti_box_content">
                <img src="1.jpg">
                <div class="note_box_content_text_container">
                    <font class="noti_text">승의님의 게시글에 댓글이 뿅하고 달렸습니다</font>
                    <br>
                    <font class="noti_date_text">오전 2:00</font>
                </div>
                <img src="1.jpg">
            </div>
            <div class="noti_box_undertext">
                <font class="noti_date_text">"글 댓글 댓글해"</font>
            </div>
        </div>

        <div class="noti_box">
            <div class="noti_box_content">
                <img src="1.jpg">
                <div class="note_box_content_text_container">
                    <font class="noti_text">승의님의 게시글에 댓글이 뿅하고 달렸습니다</font>
                    <br>
                    <font class="noti_date_text">오전 2:00</font>
                </div>
                <img src="1.jpg">
            </div>
            <div class="noti_box_undertext">
                <font class="noti_date_text">"글 댓글 댓글해"</font>
            </div>
        </div>

        <div class="noti_box">
            <div class="noti_box_content">
                <img src="1.jpg">
                <div class="note_box_content_text_container">
                    <font class="noti_text">승의님의 게시글에 댓글이 뿅하고 달렸습니다</font>
                    <br>
                    <font class="noti_date_text">오전 2:00</font>
                </div>
                <img src="1.jpg">
            </div>
            <div class="noti_box_undertext">
                <font class="noti_date_text">"글 댓글 댓글해"</font>
            </div>
        </div>

        <div class="noti_box">
            <div class="noti_box_content">
                <img src="1.jpg">
                <div class="note_box_content_text_container">
                    <font class="noti_text">승의님의 게시글에 댓글이 뿅하고 달렸습니다</font>
                    <br>
                    <font class="noti_date_text">오전 2:00</font>
                </div>
                <img src="1.jpg">
            </div>
            <div class="noti_box_undertext">
                <font class="noti_date_text">"글 댓글 댓글해"</font>
            </div>
        </div>

        <div class="noti_box">
            <div class="noti_box_content">
                <img src="1.jpg">
                <div class="note_box_content_text_container">
                    <font class="noti_text">승의님의 게시글에 댓글이 뿅하고 달렸습니다</font>
                    <br>
                    <font class="noti_date_text">오전 2:00</font>
                </div>
                <img src="1.jpg">
            </div>
            <div class="noti_box_undertext">
                <font class="noti_date_text">"글 댓글 댓글해"</font>
            </div>
        </div>

    </div>

    <div class="noti_borderLine"></div>
</div>
<!-- 알림 끝 -->

</div>
<!-- 상단바 끝 -->


<!-- 사이드바 시작 -->
<div id="sidebar">
    <!-- 왼쪽 사이드바 시작 -->
    <div id="sidebar_left">
        <!-- 사이드바 로고 -->
        <a href="{% url "main" %}"><img id="f_nav_logo" src="{% static "img/Logo.png" %}"></a>

        <!-- 프로필 정보 -->
        <a href="{% url "mypage" %}">
            <div id="f_nav_profile_container">
                <div id="profileImgBox" style="background-image: url(/static/img/my-profile-photo.png)">
                </div>
                <h3 id="f_nav_profile_name"> {{ user.last_name }}</h3>
            </div>
        </a>
        <!-- 프로필 정보 끝 -->

        <!-- 정렬방식 시작-->
        <div id="f_nav_sorttype">
            <input type="button" class="sorttype" value="최신순" onclick="ClickedNew()"></input>
        <input type="button" class="sorttype" value="인기도순" onclick="ClickedPop()"></input>
    <input type="button" class="sorttype" value="신뢰도순" onclick="ClickedTru()"></input>
<input type="button" id="changsort" class="sorttype" value="十창순" onclick="ClickedCha()"></input>
</div>
<!-- 정렬방식 끝-->

<!-- 카테고리 시작 -->
<div id="f_nav_category" onclick="ClickedCat()">분류 카테고리
    <img id="arrow" src="{% static "img/category_arrow.png" %}">
</div>
<!-- 카테고리 시작 -->

<!-- Copyrights 시작 -->
<footer>
    <a href="../logout">
        <div id="profile_logout" style="cursor:pointer">로그아웃</div>
    </a>
</footer>
<!-- Copyrights 끝 -->
</div>
<!-- 왼쪽 사이드바 끝 -->
<div id="sidebar_right_chang">
    <div id="chang_score2">
        <img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img class="changImage2" src="{% static "img/spear-unfocused.png" %}"><img id='changHidden' class="changImage2" src="{% static "img/spear-unfocused.png" %}">
    </div>
</div>


<!-- 오른쪽 사이드바 시작 -->
<div id="sidebar_right" onclick="SelectedCat()">
    <div class="category">전체보기</div>
    <div class="category">의류</div>
    <div class="category">미용 / 뷰티</div>
    <div class="category">음류 및 주류</div>
    <div class="category">식품</div>
    <div class="category">생활용품</div>
    <div class="category">교육</div>
    <div class="category">금융</div>
    <div class="category">문화</div>
    <div class="category">스포츠/레저</div>
    <div class="category">관리/중계 서비스</div>
    <div class="category">인테리어 용품/서비스</div>
    <div class="category">전자기기</div>
    <div class="category">생활서비스</div>
</div>
<!-- 오른쪽 사이드바 끝 -->
</div>
<!-- 사이드바 끝 -->

<!-- 배경 어둡게 하기 -->
<div id="dim_background">
    <!-- 이미지 자세히 보기 시작 -->
    <div id="imageDetail" style="background-image: url(../img/example2.png);">
        <img id="prevImgBtn" src="{% static "img/left_arrow.png" %}">
        <img id="nextImgBtn" src="{% static "img/right_arrow.png" %}">
        <img id="image_close" src="{% static "img/X.jpg"%}" width="20px" height="20px">
    </div>
    <!-- 이미지 자세히 보기 끝 -->
</div>
<!-- 배경 어둡게 하기 끝 -->

<!-- 컨텐츠 시작 -->
<div id="contents_container">

    <!--게시글 공간 띄우기-->
    <div id="contents_spacer"></div>
    <!-- 글쓰는 부분 시작 -->
    <div id="upload_postings" class="posts_box">
        <div id="categorySelect_Rate_Container">
            <div id="category_select_box">
                <h5 class="arrowdown leftcatdiv" onclick="chooseCat()">|</h5>
                <select id="select">
                    <option>카테고리</option>
                    <option>의류</option>
                    <option>미용/뷰티</option>
                    <option>음료 및 주류</option>
                    <option>식품</option>
                    <option>생활용품</option>
                    <option>교육</option>
                    <option>금융</option>
                    <option>문화</option>
                    <option>스포츠/레저</option>
                    <option>관리/중계 서비스</option>
                    <option>인테리어 용품/서비스</option>
                    <option>전자기기</option>
                    <option>생활서비스</option>
                </select>
                <div id="chang_score">
                    <img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17"><img id='changHidden' class="changImage" src="{% static "img/spear-unfocused.png" %}" width="17">
                </div>
                <h5 class="arrowdown" onclick="chooseCat()">| &#9660;</h5>
            </div>
        </div>
        <textarea class="textarea" id="post_box" onkeydown="resize(this)" onkeyup="resize(this)" placeholder="당신의 지금 기분을 창으로 표현해 주세요!"></textarea>

        <!-- 사진 올라가는 div 시작 -->
        <!-- todo: 승의가 js로 dom생성할것 -->
        <div id="imgPreview_container">
            <div class="imagePreview_Post"></div>
            <div id="plus_img_box">
                +1
                <!-- 사진 올라갈때 5장 이상부터 보이기 -->
            </div>
        </div>
        <!-- 사진 올라가는 div 끝 -->

        <div id="post_btns_container">

            <label id="image_upload" class="upload" for="Post_file">
                <img src="{% static "img/photo.png" %}" width="100px" />
            </label>
            <input type="file" name="files" id="Post_file" onchange="InputImage_Post(); Postfilee_selected = true;" accept="image/*" multiple>
            <label id="video_upload" class="upload" for="Post_file">
                <img src="{% static "img/video.png" %}" width="100px">
            </label>

            <input id="submit_post" class="button" type="button" value="올리기" onclick="content_post()"></input>
    </div>
</div>
<!-- 글쓰는 부분 끝 -->
<!-- 포스팅 시작 -->
<div class="list">
{% for post in posts %}
<div class="posts_box" pk="{{post.pk}}" id="box_{{post.timestamp}}"  popular="{{post.viewer}}" trust="{{post.trust}}" chang="{{post.spear}}">
    <div class="post">
        <div id="downarrow" onclick="showPop(this)">
            <img src="{% static "img/arrow.png" %}" width="20px">
        </div>
        <div id="post_popup_container" onclick="showPop(this)">
            {% if user.username|stringformat:"s" == post.author|stringformat:"s" %}
            <a href=""><div class="popup_mypost">내가 쓴 글 수정</div></a>
            <a href="{% url "post_remove" post_id=post.pk %}"><div class="popup_mypost">내가 쓴 글 삭제</div></a>
            {% else %}
            <a><div class="popup_follow">{{post.author}}님을 팔로우</div></a>
            <a><div class="popup_follow">이 게시물을 보지 않습니다.</div></a>
            {% endif %}
        </div>
        <div class="box_intro">
            <img class="intro_img" src="{% static "img/profile.png" %}" width="70" height="70">
            <div class="intro_text">
                <div class="text_name">{{post.author}}</div>
                <div class="text_content">{{post.created_date}}</div>
                <div class="comment_cat">| {{post.categori}} |</div>
            </div>
        </div>
        <div class="box_content">
            {{post.text}}
        </div>
        <div class="box_poto">

            {% for image in post.get_files%}
            <div class="photolist"><img class="poto_list" src="{{image}}"></div>
            {% endfor %}
            <div class="photolist" id="list_count"></div>
        </div>
        <div class="box_love">
            <div class="love_love">
                <img class="love_img" onclick="clickedBtnLove(this)" src="{% static "img/heart.png" %}" width="35">
                <div class="love_chang_text">{{post.viewer}}</div>
            </div>
            <div class="love_chang">
                <img class="chang_img" src="{% static "img/spear.png" %}" width="35">
                <div class="love_chang_text">{{post.spear}}</div>
            </div>
            <div class="love_chang">
                <img class="chang_img" src="{% static "img/comment.png" %}" width="35">
                <div class="love_chang_text" id="comment_count">{{post.comments.all.length}}</div>
            </div>
        </div>
    </div>
    </br>
<hr />
<div class="comment">
    <div class="comment_all">전체 댓글 보기</div>
    <!-- 댓글 예시 시작 -->
    {% for comment in post.comments.all %}
    <div class="comment_intro">
        <img class="comment_image" src="{% static "img/profile.png" %}" width="60">
        <div class="comment_ndc">
            <div class="comment_name">{{comment.author}}</div>
            <div class="comment_date">{{ comment.created_date }}</div>
            <div class="comment_content">{{comment.text}}</div>
        </div>
    </div>
    {% empty %}
    <p>첫 번째 댓글러가 되어주세요!ㅎㅎ</p>
    {% endfor %}
    <!-- 댓글 입력 부분 시작 -->
    <form action="/post/comment/" method=POST>
        {% csrf_token %}

        <div class="comment_write">
            <input name = "post_id" style="display:none;" value="{{post.pk}}"/>
            <div class="write_input">
                <textarea class="write_textarea" placeholder="댓글입력" onkeydown="resize(this)" onkeyup="resize(this)" name="text"></textarea>
            </div>
            <button type="submit" style="background-color:rgba(0, 0, 0, 0);outline: 0;border:0;"><div class="write_submit">완료</div></button>
        </div>
    </form>
</div>

</div>

{% endfor %}
</div>
</div>


<!-- 포스팅 끝 -->
<!-- 컨텐츠 끝 -->

</body>
<script>
var c = 0;
    var chang = 0;
    var temp;

    window.onload=function(){
        init();
    var box = document.getElementsByClassName('box_poto');

    for (var i = 0; i < box.length; i++) {
        clearWhiteElement(box[i]);
    }
    for (var i = 0; i < box.length; i++) {
        var image = [];

        for (var j = 0; j < box[i].childNodes.length; j++) {
            image[j] = box[i].childNodes[j].firstChild;
        }
        PhotoList(image);
    }

    var image_count=0;
    // 올린 사진 리스트
    function PhotoList(obj) {
        if (obj.length > 2 && obj.length <= 4) {
            for (var i = 0; i < obj.length-1; i++) {
                obj[i].parentNode.style.width = "180px";
                obj[i].parentNode.style.height = "180px";
                obj[i].style.width = "180px";
                obj[i].style.height = "180px";
            }

        } else if (obj.length >= 5) {
            var count = 0;
            for (var i = 0; i < obj.length-1; i++) {
                obj[i].parentNode.style.width = "180px";
                obj[i].parentNode.style.height = "180px";
                obj[i].style.width = "180px";
                obj[i].style.height = "180px";
                if (i > 2) {
                    count++;
                    obj[i].parentNode.style.display = "none";
                    obj[i].parentNode.parentNode.lastChild.style.display = "inline-block";
                    obj[i].parentNode.parentNode.lastChild.innerHTML = "+" + (count);
                }
            }

        } else if (obj.length == 2) {
            if (obj[0].clientWidth > obj[0].parentNode.parentNode.clientHeight) {
                obj[0].style.width = obj[0].parentNode.parentNode.clientWidth + "px";
            }

            if (obj[0].clientWidth >= 700) {
                obj[0].style.width = obj[0].parentNode.parentNode.clientWidth + "px";
            }
        }
        // 이미지 슬라이드

        // 이미지 open
        for (var i = 0; i < obj.length-1; i++) {
            obj[i].addEventListener('click', open,false);
        }
        function open() {
            document.getElementById('dim_background').style.display = "block"
            document.getElementById('imageDetail').style.backgroundImage = "url(" + this.src + ")"
            clearWhiteElement(this.parentNode.parentNode);
            //   prevImgBtn , nextImgBtn
            temp=this;
              
            console.log(temp);
            function prev() {
                if(temp.parentNode.previousSibling.firstChild.src==null){
                        document.getElementById('prevImgBtn').removeEventListener("click", prev);

                        return;
                }
               document.getElementById('imageDetail').style.backgroundImage = "url('" + temp.parentNode.previousSibling.firstChild.src + "')";
                temp=temp.parentNode.previousSibling.firstChild;
                                            console.log(temp);
                
            }
            function next() {
                if(temp.parentNode.nextSibling.firstChild.src==null){
                    document.getElementById('nextImgBtn').removeEventListener("click", next);

                    return;
                }
                document.getElementById('imageDetail').style.backgroundImage = "url('" + temp.parentNode.nextSibling.firstChild.src + "')";
                                temp=temp.parentNode.nextSibling.firstChild;
                                            console.log(temp);

            }
            document.getElementById('prevImgBtn').removeEventListener("click", prev);
            document.getElementById('nextImgBtn').removeEventListener("click", next);
            document.getElementById('prevImgBtn').addEventListener('click',prev ,false);

            document.getElementById('nextImgBtn').addEventListener('click',next ,false);

            // 이미지 close
            document.getElementById('image_close').addEventListener('click', function () {
                document.getElementById('dim_background').style.display = "none"
            })
        }

        document.getElementById('dim_background').addEventListener('click', function (event) {
            div = $('#imageDetail');
            var img = new Image;
            img.src = div.css('background-image').replace(/url\(|\)$/ig, "");
            div = div[0];
            var iw = img.width;
            var ih = img.height;
            var ew = div.clientWidth;
            var eh = ew * ih / iw;
            var ex = div.offsetLeft;
            var ey = div.offsetTop + (div.clientHeight - eh) / 2 ;

            var mx = event.pageX;
            var my = event.pageY;
            if((ex < mx && mx < ex + ew) && (ey < my && my < ey + eh))
                return;
            document.getElementById('dim_background').style.display = "none"
        })



    }


    // 창 //

    // 선언부 a: 바꿀 클래스들 c: 카운트
    var a = document.getElementsByClassName('changImage');
    

    // 이벤트 처리
    document.getElementById('chang_score').addEventListener('mouseout', t)

    for (var i = 0; i < a.length; i++) {
        a[i].addEventListener('mouseover', b, false)
        a[i].addEventListener('click', e, false)
    }

    for (var i = 0; i < a.length; i++) {
        a[i].style.marginRight = "1px";
    }


    // 클릭 and over함수
    function b() {
        reset();
        for (var i = 0;
             (a[i] != this.nextSibling); i++) {
            a[i].src = "/static/img/spear-focused.png";
        }

    }

    function e() {
        c = 0;
        for (var i = 0;
             (a[i] != this.nextSibling); i++) {
            a[i].src = "/static/img/spear-focused.png";
            c++;
            chang = c;
        }
    }

    // 리셋함수

    function t() {
        console.log("t");
        reset();
        for (var i = 0; i < c; i++) {
            a[i].src = "/static/img/spear-focused.png";
        }
    }

    function reset() {
        for (var i = 0; i < a.length; i++) {
            a[i].src = "/static/img/spear-unfocused.png";
        }
    }

    var f = document.getElementsByClassName('changImage2');
    var g = 0;
    var chang2 = 0;

    // 이벤트 처리
    document.getElementById('chang_score2').addEventListener('mouseout', s);

    for (var i = 0; i < f.length; i++) {
        f[i].addEventListener('mouseover', k, false)
        f[i].addEventListener('click', h, false)
    }

    for (var i = 0; i < f.length; i++) {
        f[i].style.marginRight = "1px";
    }


    // 클릭 and over함수
    function k() {
        reset2();
        for (var i = 0;
             (f[i] != this.nextSibling); i++) {
            f[i].src = "/static/img/spear-focused.png";
        }

    }

    function h() {
        g = 0;
        Contents=document.getElementsByClassName("posts_box");
        for (var i = 0;
             (f[i] != this.nextSibling); i++) {
            f[i].src = "/static/img/spear-focused.png";
            g++;
            chang2 = g;

        }
        for(var j=0;j<Contents.length;j++){
            for(var i=0;i<Contents.length-1;i++){
                chang=parseInt(Contents[i].getAttribute("chang"));
                chang=parseInt(Contents[i+1].getAttribute("chang"));
                if(chang<chang2){
                    $(function() {
                        swapElements($('.posts_box[id!=upload_postings]'), i, i+1);
                    });
                }
            }
        }
    }

    // 리셋함수

    function s() {
        reset2();
        for (var i = 0; i < g; i++) {
            f[i].src = "/static/img/spear-focused.png";
        }
    }

    function reset2() {
        for (var i = 0; i < f.length; i++) {
            f[i].src = "/static/img/spear-unfocused.png";
        }
    }
    function clearWhiteElement(elem){

        elem = elem || document;

        var childs = elem.childNodes
        , length = childs.length;

        for (var i = 0; i < length; i++){

            var child = childs[i];

            if (child)
            {
                if (child.nodeType === 3 && !/\S/.test(child.nodeValue)){
                    elem.removeChild(child);
                }
                else if(child.nodeType === 1)
                {
                    clearWhiteElement(child);
                }
            }
            else{
                var n = next(elem);
                if (n) clearWhiteElement(n);
            }
        }
    }
    function next(elem){

        do{
            elem = elem.nextSibling;
        }
        while(elem && elem.nodeType !== 1)

            return elem;

    }
    var comment = document.getElementsByClassName('comment');
    var comment_count = 0;
    for (var i = 0; i <comment.length; i++) {
        for(var j =0;j<comment[i].childNodes.length;j++){
            if(comment[i].childNodes[j].className == "comment_intro")
                comment_count++;
        }
        clearWhiteElement(comment[i].parentNode);
        clearWhiteElement(comment[i].parentNode.childNodes[0]);
        clearWhiteElement(comment[i].parentNode.childNodes[0].childNodes[5]);
        clearWhiteElement(comment[i].parentNode.childNodes[0].childNodes[5].childNodes[2]);
        comment[i].parentNode.childNodes[0].childNodes[5].childNodes[2].childNodes[1].innerHTML = comment_count;
        comment_count = 0;
    }
    }

</script>


</html>